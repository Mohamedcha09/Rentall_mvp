/* =========================================================
   RentAll — Glass UI (one file)
   ========================================================= */

/* ---------------- Theme Tokens ---------------- */
:root{
  --bg:#0b0f15;
  --glass:#0f1521cc;
  --surface:#121929;
  --panel:#141d30;
  --card:#171f32;
  --text:#eef3fb;
  --muted:#aeb6c8;
  --border:rgba(255,255,255,.12);
  --ring:rgba(124,92,255,.30);
  --shadow:0 18px 46px rgba(0,0,0,.45);

  --primary:#7c5cff;
  --primary-2:#5a3eff;
  --success:#22c55e;
  --danger:#ff4d6d;
  --warning:#f8b84e;

  --sidebar-w:268px;
}

/* Light mode (اختياري) */
body[data-theme="light"]{
  --bg:#f4f6fb; --glass:#ffffffde; --surface:#fff; --panel:#fff; --card:#fff;
  --text:#0d1320; --muted:#586177; --border:rgba(0,0,0,.08);
  --ring:rgba(124,92,255,.22); --shadow:0 18px 46px rgba(0,0,0,.08);
}

/* ---------------- Base ---------------- */
html,body{height:100%}
html{background:var(--bg)}
body{
  background:
    radial-gradient(900px 600px at 85% -10%, rgba(124,92,255,.15), transparent 40%),
    radial-gradient(800px 500px at -10% 110%, rgba(0,229,168,.08), transparent 40%),
    var(--bg);
  color:var(--text);
  font-family:'Tajawal','Cairo',system-ui,-apple-system,'Segoe UI',Roboto,Arial,sans-serif;
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
}
*{scrollbar-width:thin; scrollbar-color: color-mix(in oklab, var(--text) 20%, transparent) transparent}
*::-webkit-scrollbar{height:10px;width:10px}
*::-webkit-scrollbar-thumb{background:color-mix(in oklab, var(--text) 22%, transparent);border-radius:20px}
*::-webkit-scrollbar-track{background:transparent}
.text-muted{color:var(--muted)!important}

/* ---------------- Topbar (زجاجي) ---------------- */
.topbar{
  position:fixed; inset:0 0 auto 0; height:64px;
  background: linear-gradient(180deg, var(--glass), color-mix(in oklab, var(--glass) 75%, transparent));
  backdrop-filter: blur(14px) saturate(120%);
  border-bottom:1px solid var(--border);
  z-index:2000;
}
.topbar__inner{
  display:grid; grid-template-columns:auto auto 1fr auto; gap:10px;
  align-items:center; padding:10px 14px;
}
.brand__logo{width:28px;height:28px;border-radius:8px;object-fit:cover;box-shadow:0 4px 12px rgba(0,0,0,.35)}
.brand__name{font-weight:800; letter-spacing:.3px}
.btn-ghost{background:transparent; color:inherit; border:1px solid var(--border); border-radius:12px; padding:.4rem .75rem}
.btn-ghost:hover{background:color-mix(in oklab, var(--text) 8%, transparent)}
.btn-primary{
  background:linear-gradient(135deg,var(--primary),var(--primary-2));
  border:0; color:#fff; border-radius:12px;
  box-shadow:0 12px 28px rgba(124,92,255,.28);
}
.btn-primary:hover{filter:brightness(1.05)}

/* Search pill */
.search{position:relative; max-width:780px; width:100%}
.search__icon{position:absolute; inset-inline-start:12px; top:50%; transform:translateY(-50%); opacity:.9; pointer-events:none}
.search__input{
  padding-inline:38px 14px; height:40px; border-radius:999px;
  background: radial-gradient(200px 100% at 100% 0, color-mix(in oklab, var(--primary) 20%, transparent), transparent 60%), color-mix(in oklab, var(--surface) 94%, transparent);
  border:1px solid var(--border); color:inherit;
  transition: box-shadow .15s ease, border-color .15s ease, background .2s ease;
}
.search__input::placeholder{color:color-mix(in oklab, var(--text) 70%, transparent)}
.search__input:focus{outline:none; box-shadow:0 0 0 4px var(--ring); border-color:color-mix(in oklab, var(--primary) 65%, var(--border))}

/* ---------------- Sidebar ---------------- */
.sidebar{
  position:fixed; top:64px; bottom:0; inset-inline-start:0; width:var(--sidebar-w);
  background:linear-gradient(180deg, var(--surface), var(--panel));
  border-inline-end:1px solid var(--border);
  padding:14px 10px; overflow:auto; z-index:1200;
  display:flex; flex-direction:column; gap:12px;
  transition: width .22s ease, transform .25s ease;
}
.sidebar[data-collapsed="true"]{ --sidebar-w:84px }
.sidebar__nav{display:flex;flex-direction:column;gap:6px}
.side-link{
  display:flex; align-items:center; gap:.9rem; padding:.62rem .85rem; border-radius:14px;
  color:color-mix(in oklab, var(--text) 92%, white); text-decoration:none;
  transition: background .15s ease, transform .15s ease, color .15s ease; position:relative
}
.side-link i{font-size:1.15rem;opacity:.95;flex:0 0 auto}
.side-link span{white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
.side-link:hover{background:color-mix(in oklab, var(--text) 8%, transparent); transform:translateX(-2px)}
.side-link.is-active{
  background:color-mix(in oklab, var(--primary) 22%, transparent);
  border:1px solid color-mix(in oklab, var(--primary) 40%, var(--border));
  color:var(--text); box-shadow:0 12px 28px rgba(124,92,255,.18)
}
.sidebar[data-collapsed="true"] .side-link{justify-content:center; padding:.62rem .6rem}
.sidebar[data-collapsed="true"] .side-link span{display:none}
.side-sep{height:1px;background:var(--border);margin:.5rem .25rem}

/* ---------------- Right rail (اختياري) ---------------- */
.right-rail{
  position:fixed; top:64px; bottom:0; inset-inline-end:0; width:320px; padding:16px; overflow:auto;
  border-inline-start:1px solid var(--border); background:linear-gradient(180deg, var(--surface), var(--panel));
  z-index:1100
}
.widget__title{font-weight:800; margin-bottom:.35rem}

/* ---------------- Page wrapper ---------------- */
.page{
  padding: calc(64px + 18px) 20px 28px;
  margin-inline: var(--sidebar-w) 0;
  max-width: 1240px;
  transition: margin-inline-start .22s ease;
}
@media (min-width: 1400px){ .page{ margin-inline-end: 340px } }
@media (max-width: 1399.98px){ .right-rail{ display:none } }
@media (max-width: 991.98px){
  .sidebar{transform:translateX(100%)}
  .sidebar.is-open{transform:translateX(0)}
  .page{ margin-inline: 0; padding: calc(64px + 12px) 12px 20px }
}

/* ---------------- Surfaces (cards/forms/alerts) ---------------- */
.card, .alert, .list-group-item, .form-control, .form-select{
  background:linear-gradient(180deg, color-mix(in oklab, var(--card) 92%, transparent), color-mix(in oklab, var(--card) 84%, transparent));
  border:1px solid var(--border); color:var(--text); border-radius:16px
}
.card{ box-shadow: var(--shadow); transition:border-color .16s ease, box-shadow .16s ease, transform .16s ease }
.card:hover{ border-color:color-mix(in oklab, var(--primary) 40%, var(--border)); box-shadow:0 20px 44px rgba(124,92,255,.18); transform: translateY(-2px) }
.form-control:focus, .form-select:focus{ box-shadow:0 0 0 4px var(--ring); border-color:color-mix(in oklab, var(--primary) 65%, var(--border)) }
.alert{border-radius:14px}
.alert-warning{ color:var(--text) }
.badge{border-radius:999px; padding:.35rem .6rem; font-weight:600}

/* ---------------- Home: search & filters ---------------- */
.card-search{border-radius:16px; box-shadow:var(--shadow); background:color-mix(in oklab, var(--card) 95%, transparent)}

/* ---------------- Grid of items ---------------- */
.home-grid{
  display:grid;
  grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
  gap:16px;
}

/* Card skeleton */
.card.spot{
  display:flex; flex-direction:column; height:100%;
  border-radius:16px; overflow:hidden;
  background:linear-gradient(180deg, color-mix(in oklab, var(--card) 95%, transparent), color-mix(in oklab, var(--card) 88%, transparent));
}

/* Media block (fixed ratio) */
.spot-media{
  position:relative; aspect-ratio:16/10; overflow:hidden;
  background: color-mix(in oklab, var(--surface) 90%, transparent);
  border-bottom:1px solid var(--border);
}
.spot-media > img{
  width:100%; height:100%; object-fit:cover; display:block; transition:transform .22s ease;
}
.card.spot:hover .spot-media > img{ transform:scale(1.02) }

/* Overlay + ribbons */
.spot-overlay{position:absolute; inset:0; background:linear-gradient(180deg, transparent 55%, rgba(15,17,21,.55))}
.price-badge, .category-chip{ position:absolute; top:10px; z-index:2 }
.price-badge{
  inset-inline-start:10px; padding:.3rem .55rem; font-weight:700; font-size:.9rem;
  border-radius:999px; color:#fff;
  background: rgba(10,12,16,.65); backdrop-filter: blur(8px);
  border:1px solid var(--border); box-shadow:0 6px 18px rgba(0,0,0,.35);
}
.category-chip{
  inset-inline-end:10px; padding:.2rem .5rem; font-size:.78rem; border-radius:999px;
  color:#cfe2ff; background: rgba(124,92,255,.18); border:1px solid rgba(124,92,255,.35);
}

/* Body */
.card.spot .card-body{ padding:.7rem .8rem .85rem; display:flex; flex-direction:column }
.spot-body{ flex:1; display:flex; flex-direction:column; gap:10px }

/* Title: clamp 2 lines */
.spot-title{
  margin:.1rem 0 .2rem;
  display:-webkit-box; -webkit-box-orient:vertical; -webkit-line-clamp:2; overflow:hidden;
  min-height:2.8em; line-height:1.25;
}

/* Owner line */
.owner-line{ min-height:28px; display:flex; align-items:center; gap:.5rem }
.owner-avatar, .owner-avatar--placeholder{
  width:24px; height:24px; border-radius:50%;
  object-fit:cover; border:1px solid var(--border);
  background: color-mix(in oklab, var(--panel) 85%, black);
  display:grid; place-items:center;
}
.card.spot .small, .card.spot .text-muted{ font-size:.8rem; line-height:1.2 }

/* Footer sticks bottom */
.spot-footer{ margin-top:auto; display:flex; align-items:center; justify-content:space-between }

/* City chip */
.city-chip{
  padding:.25rem .55rem; border-radius:999px;
  background:rgba(255,255,255,.06); border:1px solid var(--border);
  color:var(--muted); max-width:65%; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}

/* ---------------- Dropdown & menus ---------------- */
.dropdown-menu{ background:var(--surface); border:1px solid var(--border); border-radius:12px; color:inherit; box-shadow:0 18px 40px rgba(0,0,0,.35) }
.dropdown-item{color:inherit}
.dropdown-item:hover{ background:color-mix(in oklab, var(--text) 8%, transparent) }
.topbar, .navbar{ z-index:2000 }
.dropdown-menu{ z-index:2100 }

/* ---------------- Floating Action Button ---------------- */
.fab{
  position:fixed; inset-inline-end:16px; bottom:16px; width:54px;height:54px;border-radius:50%;
  display:grid; place-items:center; color:#fff; text-decoration:none;
  background:linear-gradient(135deg,var(--primary),var(--primary-2));
  box-shadow:0 16px 40px rgba(124,92,255,.35);
  z-index:2200; transition:transform .08s ease; animation:fabpop .24s ease-out
}
.fab:active{transform:scale(.96)}
@keyframes fabpop{0%{transform:scale(.8); opacity:0}100%{transform:scale(1); opacity:1}}

/* ---------------- Admin helpers ---------------- */
img, video, iframe{ max-width:100%; height:auto; display:block }
.table{color:var(--text)}
.table thead th{position:sticky; top:0; z-index:1; background:color-mix(in oklab, var(--panel) 80%, transparent)}

/* ---------------- Responsive tweaks ---------------- */
@media (max-width:480px){
  .home-grid{ grid-template-columns:repeat(auto-fill, minmax(180px,1fr)); gap:12px }
  .spot-title{ font-size:.95rem }
}
@media (min-width:1400px){
  .home-grid{ grid-template-columns:repeat(auto-fill, minmax(220px,1fr)); gap:16px }
}
