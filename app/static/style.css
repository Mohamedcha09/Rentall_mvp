/* =========================================================
   SEVOR — Desktop Airbnb-like, Mobile untouched
   ملف ستايل نهاري فقط + Navbar ثلاث خطوط + بحث بنفسجي
   ========================================================= */

/* ----------------- ألوان ومتغيرات ----------------- */
:root{
  /* ثيم نهاري */
  --bg:#f6f7fb;
  --surface:#ffffff;
  --panel:#ffffff;
  --card:#ffffff;

  --text:#0f172a;
  --muted:#6b7280;

  --primary:#7c5cff;   /* بنفسجي أساسي */
  --primary-2:#5a3eff; /* بنفسجي أغمق */

  --border:rgba(15,23,42,.10);
  --ring: rgba(124,92,255,.25);
  --shadow: 0 18px 44px rgba(15,23,42,.08);

  --sidebar-w: 268px;
  --radius:16px;
  --brand:#7c5cff;
}

/* نجبر الوضع النهاري: أي حالة داكنة تتحول لنهار */
body[data-theme="dark"],
body[data-theme="light"],
body{
  --bg:#f6f7fb;
  --surface:#ffffff;
  --panel:#ffffff;
  --card:#ffffff;

  --text:#0f172a;
  --muted:#6b7280;

  --border:rgba(15,23,42,.10);
  --ring: rgba(124,92,255,.25);
  --shadow: 0 18px 44px rgba(15,23,42,.08);
}

/* إخفاء زر تبديل الثيم لأننا على وضع واحد */
#themeToggle{ display:none !important; }

/* ----------------- أساسيات عامة ----------------- */
html,body{height:100%; width:100%; max-width:100vw; overflow-x:hidden;}
body{
  margin:0;
  background:
    radial-gradient(1100px 780px at 80% -10%, rgba(124,92,255,.06), transparent 45%),
    radial-gradient(900px 600px at -10% 110%, rgba(0,229,168,.05), transparent 40%),
    var(--bg);
  color:var(--text);
  font-family:'Tajawal','Cairo',system-ui,-apple-system,'Segoe UI',Roboto,Arial,sans-serif;
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
}
a{ color:inherit; text-decoration:none }
a:hover{ text-decoration:none; filter:brightness(1.05) }
small,.small,.text-muted{ color:var(--muted)!important }
*{ box-sizing:border-box; scrollbar-width:thin; scrollbar-color:rgba(15,23,42,.25) transparent }
*::-webkit-scrollbar{ height:10px; width:10px }
*::-webkit-scrollbar-thumb{ background:rgba(15,23,42,.25); border-radius:20px }

/* ----------------- بطاقات وحقول ----------------- */
.card, .alert, .list-group-item, .dropdown-menu,
.form-control, .form-select{
  background:linear-gradient(180deg, color-mix(in oklab, var(--card) 96%, transparent),
                                    color-mix(in oklab, var(--card) 90%, transparent));
  border:1px solid var(--border); color:var(--text); border-radius:var(--radius);
}
.card{ box-shadow:var(--shadow); transition: border-color .16s, box-shadow .16s, transform .16s }
.card:hover{ border-color:color-mix(in oklab, var(--primary) 38%, var(--border)); box-shadow:0 20px 44px rgba(124,92,255,.14); transform: translateY(-2px) }
.form-control:focus, .form-select:focus{ box-shadow:0 0 0 4px var(--ring); border-color:color-mix(in oklab, var(--primary) 60%, var(--border)); }

/* ----------------- أزرار ----------------- */
.btn{ border-radius:12px; transition:transform .12s ease, filter .12s ease }
.btn:active{ transform:scale(.98) }
.btn-ghost{ background:transparent; color:inherit; border:1px solid var(--border); }
.btn-ghost:hover{ background:rgba(15,23,42,.05) }
.btn-primary{
  background: linear-gradient(135deg, var(--primary), var(--primary-2));
  border:0; box-shadow:0 12px 28px rgba(124,92,255,.25);
  color:#fff;
}
.btn-primary:hover{ filter:brightness(1.05) }
.btn-sm{ padding:.35rem .7rem; border-radius:12px }
.actions .btn-plain{ border:0!important; background:transparent!important; box-shadow:none!important; padding:.25rem .4rem!important; line-height:1; }
.actions .btn-plain:hover{ transform:translateY(-1px) }

/* ----------------- ترويسة (Topbar) بنمط Airbnb ----------------- */
.topbar{
  position:sticky; top:0; height:64px; z-index:2000;
  background: linear-gradient(180deg, rgba(255,255,255,.86), rgba(255,255,255,.70));
  backdrop-filter: blur(14px) saturate(120%);
  border-bottom:1px solid var(--border);
}
.topbar__inner{
  height:100%;
  display:grid; align-items:center; gap:10px;
  grid-template-columns: auto 1fr auto; /* زر القايمة | البحث | أيقونات */
  padding:8px 14px;
}

/* البحث في الوسط + بنفسجي */
.search{ position:relative; width:100%; }
@media (min-width: 992px){
  .search{ max-width: 720px; margin-inline:auto; } /* وسط الترويسة */
}
.search__icon{
  position:absolute; inset-inline-start:16px; top:50%; transform:translateY(-50%);
  opacity:.65; font-size:1.05rem; pointer-events:none;
}
.search__input{
  height:44px; border-radius:999px; padding-inline:44px 14px;
  border:1px solid var(--border);
  /* خلفية بنفسجية خفيفة تشبه Airbnb */
  background:
    radial-gradient(180px 100% at 100% 0, rgba(124,92,255,.18), transparent 60%),
    #fff;
  color:var(--text);
  transition: box-shadow .15s, border-color .15s, background .25s;
}
.search__input::placeholder{ color:#8b95a7; font-size:1.05rem; letter-spacing:.2px; }
.search__input:focus{
  outline:0; box-shadow:0 0 0 4px var(--ring);
  border-color: color-mix(in oklab, var(--primary) 60%, var(--border));
}

/* قائمة الإكمال */
.typeahead{
  position:absolute; inset-inline:0; top: calc(100% + .25rem);
  background:#fff; color:var(--text);
  border: 1px solid rgba(0,0,0,.1); border-radius:.75rem;
  box-shadow: 0 14px 36px rgba(0,0,0,.18); z-index:2000; overflow:hidden;
}
.typeahead.d-none{ display:none; }
.typeahead-group{ padding:.45rem .7rem; font-size:.8rem; opacity:.75; border-bottom:1px solid rgba(0,0,0,.06) }
.typeahead-item{ padding:.6rem .75rem; display:flex; gap:.6rem; align-items:center; cursor:pointer; }
.typeahead-item:hover, .typeahead-item.active{ background: rgba(124,92,255,.10); }
.typeahead-item .k{ opacity:.65; font-size:.85em }

/* أيقونات الرسائل/الإشعارات */
.actions .btn-icon{ border:0!important; background:transparent!important; padding:.15rem .35rem!important; box-shadow:none!important; }
.actions .msg-icon i{ color:#7c5cff; font-size:1.35rem }
.actions .notif-icon i{ color:#1ec9a8; font-size:1.35rem }

/* عداد الجرس */
#notifOpen{ position:relative }
#notifOpen .notif-count{
  position:absolute; top:-6px; inset-inline-end:-6px;
  background:#d43aff; color:#fff; font-size:12px; line-height:18px;
  min-width:18px; height:18px; padding:0 4px; border-radius:10px; text-align:center;
}
#notifOpen .notif-ping{
  position:absolute; top:-2px; inset-inline-end:-2px; width:8px; height:8px;
  background:#d43aff; border-radius:50%; box-shadow: 0 0 0 6px rgba(212,58,255,.18);
}

/* لوحة الإشعارات الجانبية */
.notif-panel{
  position: fixed; top:0; inset-inline-end:-420px; width:360px; max-width:88vw; height:100vh;
  background: var(--panel); color: var(--text);
  border-inline-start:1px solid var(--border);
  box-shadow: -14px 0 36px rgba(0,0,0,.16);
  z-index:2300; display:flex; flex-direction:column; transition:.25s ease;
}
.notif-panel.is-open{ inset-inline-end:0; }
.notif-panel__header{ padding:12px 14px; border-bottom:1px solid var(--border); }
.notif-panel__body{ padding:10px 14px; overflow:auto; }
.notif-row{
  display:block; padding:10px 8px; text-decoration:none; color:inherit;
  border-bottom:1px solid var(--border); border-radius:8px;
}
.notif-row:hover{ background: color-mix(in oklab, var(--surface) 96%, transparent); }
.scrim{ position:fixed; inset:0; background:rgba(0,0,0,.35); z-index:2200; opacity:0; pointer-events:none; transition:.2s; }
.scrim.is-show{ opacity:1; pointer-events:auto; }

/* ----------------- Sidebar و Page ----------------- */
/* على الكمبيوتر: نخفي السايدبار نهائيًا ونمد الصفحة بعرض كامل */
@media (min-width: 992px){
  .sidebar{ display:none !important; }
  .page{
    margin-inline: 0 !important;
    max-width: 1400px;
    padding: calc(64px + 18px) 20px 28px;
    margin-inline:auto !important;
  }
}
/* على الموبايل/التابلت: نبقي الإعداد كما هو (السابق كان مخفي أيضًا) */
@media (max-width: 991.98px){
  .sidebar{ display:none !important; }
  .page{ margin-inline:0 !important; padding: calc(64px + 12px) 12px 90px; }
}

/* ----------------- شبكة العناصر (Cards) ----------------- */
.home-grid{
  display:grid;
  grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
  gap:16px;
}
.card.spot{
  display:flex; flex-direction:column; height:100%;
  border-radius:18px; overflow:hidden;
}
.spot-media{
  position:relative; aspect-ratio: 16 / 10; overflow:hidden;
  background:#f2f4f8; border-bottom:1px solid var(--border);
}
.spot-media > img{ width:100%; height:100%; object-fit:cover; display:block; transition: transform .22s ease; }
.card.spot:hover .spot-media > img{ transform:scale(1.02) }
.spot-overlay{ position:absolute; inset:0; background: linear-gradient(180deg, transparent 55%, rgba(0,0,0,.28)); pointer-events:none; }
.price-badge, .category-chip{ position:absolute; top:10px; z-index:2; border-radius:999px; }
.price-badge{
  inset-inline-start:10px; padding:.3rem .55rem; font-weight:700; font-size:.9rem;
  background: rgba(0,0,0,.55); color:#fff; border:1px solid rgba(255,255,255,.18);
}
.category-chip{
  inset-inline-end:10px; padding:.2rem .5rem; font-size:.78rem; color:#553cff;
  background: rgba(124,92,255,.12); border:1px solid rgba(124,92,255,.32);
}
.card.spot .card-body{ padding:.7rem .75rem .9rem }
.spot-title{
  margin:.1rem 0 .35rem;
  display:-webkit-box; -webkit-box-orient: vertical; -webkit-line-clamp: 2;
  overflow:hidden; min-height:2.6em; line-height:1.25;
}
.owner-line{ display:flex; align-items:center; gap:.5rem; min-height:28px }
.owner-avatar, .owner-avatar--placeholder{
  width:24px; height:24px; border-radius:50%; object-fit:cover;
  border:1px solid var(--border); background:#f2f4f8; display:grid; place-items:center;
}
.city-chip{
  padding:.2rem .5rem; border-radius:999px; background:#f7f7fa; border:1px solid var(--border);
  color:var(--muted); max-width:65%; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}
.spot-footer{ margin-top:auto; display:flex; align-items:center; justify-content:space-between }

@media (max-width: 480px){
  .home-grid{ grid-template-columns: repeat(auto-fill, minmax(170px,1fr)); gap:12px }
  .spot-title{ font-size:.95rem }
}

/* زر مفضلة فوق الصورة (متوافق مع home.html) */
.spot-media{ border-radius:16px 16px 0 0 }
.spot-media img{ height:220px }
.fav-btn{
  position:absolute; right:10px; top:56px;
  width:40px; height:40px; border:none; outline:none; cursor:pointer;
  border-radius:999px; background:rgba(255,255,255,0.95);
  display:flex; align-items:center; justify-content:center;
  box-shadow: 0 4px 14px rgba(0,0,0,.12);
}
.fav-btn .bi{ font-size:18px; color:#a944ec; line-height:1 }
.fav-btn.is-fav{ background:#a944ec; }
.fav-btn.is-fav .bi{ color:#fff }

/* ----------------- تبويب سفلي للجوال (بدون تغيير شكل) ----------------- */
.mobile-tabbar{
  position: fixed; inset-inline: 0; bottom: 0; height: 64px;
  background: linear-gradient(180deg, color-mix(in oklab, var(--surface) 98%, transparent),
                                       color-mix(in oklab, var(--panel) 94%, transparent));
  border-top: 1px solid var(--border);
  backdrop-filter: blur(14px) saturate(120%);
  z-index: 2100;
  display: none;
}
.mobile-tabbar .tabbar-inner{ height:100%; display:grid; grid-template-columns:repeat(5,1fr); }
.mobile-tabbar a{
  display:flex; flex-direction:column; align-items:center; justify-content:center; gap:4px;
  color: var(--muted); font-size:.82rem; text-decoration:none;
}
.mobile-tabbar a.is-active{ color:#111827; font-weight:700 }
.mobile-tabbar .tab-img{ width:22px; height:22px; object-fit:contain; opacity:.55; transition:.15s; }
.mobile-tabbar a.is-active .tab-img{ opacity:1; transform:translateY(-1px) }
@supports (padding: max(0px)){ .mobile-tabbar{ padding-bottom: max(env(safe-area-inset-bottom), 0px); } }
@media (max-width:768px){ .mobile-tabbar{ display:block; } }

/* زر إضافة عائم للجوال (كما هو) */
.fab{
  position:fixed; inset-inline-end:16px; bottom:16px; width:54px; height:54px; border-radius:50%;
  display:grid; place-items:center; color:#fff; text-decoration:none;
  background:linear-gradient(135deg, var(--primary), var(--primary-2));
  box-shadow:0 16px 40px rgba(124,92,255,.35);
  z-index:2200;
}

/* ----------------- إصلاحات تخطيط عامة ----------------- */
#page-wrapper{ min-height:100dvh; display:flex; flex-direction:column; }
.main-flex-fill{ flex:1 1 auto; }
.container, .container-fluid, .row{ width:100% !important; margin:0 auto !important; padding:0 12px !important; }
img, video{ max-width:100%; height:auto; }