{# app/templates/payout_settings.html #}
{% extends "base.html" %}

{% block head %}
<style>
  .card{
    border:1px solid var(--border);
    border-radius:18px;
    padding:20px;
    background:var(--surface);
    margin-bottom:18px;
  }

  .method{
    border:1px solid var(--border);
    border-radius:16px;
    padding:16px;
    margin-bottom:14px;
    transition:.2s;
  }

  .method.active{
    border-color:#6d5dfc;
    background:rgba(109,93,252,.04);
  }

  .method-title{
    display:flex;
    align-items:center;
    gap:10px;
    font-weight:600;
  }

  .method-desc{
    font-size:.9rem;
    opacity:.75;
    margin-left:28px;
    margin-top:4px;
  }

  .field{
    margin-top:14px;
  }

  .field label{
    font-weight:600;
    margin-bottom:6px;
    display:block;
  }

  .field input{
    width:100%;
    padding:12px 14px;
    border-radius:12px;
    border:1px solid var(--border);
  }

  .hint{
    font-size:.85rem;
    opacity:.7;
    margin-top:4px;
  }
</style>
{% endblock %}

{% block content %}
<div class="container" style="max-width:820px">

  <h3 class="mb-3">Payout Preferences</h3>

  <div class="card">
    <p class="mb-1">
      Choose how you want to receive your <strong>earnings</strong>.
    </p>
    <p class="hint">
      No bank connection. No automatic payouts. Sevor sends payments manually.
    </p>
  </div>

  <form method="post" action="/payout/settings">

    <!-- ================= METHOD ================= -->
    <div class="card">

      <!-- Interac -->
      <div class="method active" data-method="interac">
        <div class="method-title">
          <input type="radio" name="method" value="interac" checked>
          Interac e-Transfer (Canada)
        </div>
        <div class="method-desc">
          Canadian residents – email or phone number
        </div>

        <div class="field">
          <label>Email or phone number</label>
          <input
            type="text"
            name="interac_destination"
            placeholder="email@example.com or +1 514 000 0000"
          >
          <div class="hint">Used only to send your Interac transfer</div>
        </div>

        <div class="field">
          <label>
            <input type="checkbox" name="auto_deposit">
            Enable auto-deposit
          </label>
        </div>
      </div>

      <!-- PayPal -->
      <div class="method" data-method="paypal">
        <div class="method-title">
          <input type="radio" name="method" value="paypal">
          PayPal (USD / EUR)
        </div>
        <div class="method-desc">
          Receive funds to your PayPal account
        </div>

        <div class="field d-none">
          <label>PayPal email</label>
          <input
            type="email"
            name="paypal_email"
            placeholder="paypal@email.com"
          >
        </div>
      </div>

      <!-- Wise -->
      <div class="method" data-method="wise">
        <div class="method-title">
          <input type="radio" name="method" value="wise">
          Wise (International)
        </div>
        <div class="method-desc">
          Best for USD & EUR – IBAN or Wise account
        </div>

        <div class="field d-none">
          <label>IBAN</label>
          <input
            type="text"
            name="wise_iban"
            placeholder="DE89 3704 0044 0532 0130 00"
          >
        </div>
      </div>

    </div>

    <!-- ================= CURRENCY ================= -->
    <div class="card">
      <label>Payout currency</label>
      <select name="currency" class="form-select">
        <option value="CAD">CAD – Canadian Dollar</option>
        <option value="USD">USD – US Dollar</option>
        <option value="EUR">EUR – Euro</option>
      </select>
    </div>

    <!-- ================= ACTION ================= -->
    <div class="d-flex gap-2">
      <button class="btn btn-primary">Save preferences</button>
      <a href="/" class="btn btn-outline-secondary">Cancel</a>
    </div>

  </form>
</div>
{% endblock %}

{% block scripts %}
<script>
(function(){
  const methods = document.querySelectorAll(".method");
  const radios  = document.querySelectorAll("input[name='method']");

  function update(){
    const val = document.querySelector("input[name='method']:checked").value;
    methods.forEach(m=>{
      const active = m.dataset.method === val;
      m.classList.toggle("active", active);
      m.querySelectorAll(".field").forEach(f=>{
        f.classList.toggle("d-none", !active);
      });
    });
  }

  radios.forEach(r=>r.addEventListener("change", update));
  update();
})();
</script>
{% endblock %}
