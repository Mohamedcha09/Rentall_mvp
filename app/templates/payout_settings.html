{% extends "base.html" %}

{% block content %}
<div class="container" style="max-width:600px">

<h3 class="mb-4">Payout Settings</h3>

{% if request.query_params.get("saved") %}
<div class="alert alert-success">
  âœ… Payout method saved
</div>
{% endif %}

{# ===============================
   VIEW MODE (default)
   =============================== #}
{% if payout and not request.query_params.get("edit") %}

<p><strong>Method:</strong> {{ payout.method|upper }}</p>
<p><strong>Destination:</strong> {{ payout.destination }}</p>
<p><strong>Currency:</strong> {{ payout.currency }}</p>

<div class="d-flex gap-2 mt-3">
  <a href="/payout/settings?edit=1" class="btn btn-primary">
    Edit
  </a>

  <form method="post" action="/payout/settings/remove">
    <button type="submit" class="btn btn-danger">
      Remove
    </button>
  </form>
</div>

{% else %}

{# ===============================
   EDIT / CREATE MODE
   =============================== #}
<form method="post" action="/payout/settings">

<div class="mb-3">
  <label class="form-label">Method</label>
  <select name="method" class="form-select" required>
    <option value="interac">Interac (Canada)</option>
    <option value="paypal">PayPal</option>
    <option value="wise">Wise</option>
  </select>
</div>

<div class="mb-3">
  <label class="form-label">Email / IBAN</label>
  <input
    type="text"
    name="interac_destination"
    class="form-control"
    placeholder="Email or IBAN"
    required
  >
</div>

<div class="mb-3">
  <label class="form-label">Currency</label>
  <select name="currency" class="form-select">
    <option value="CAD">CAD</option>
    <option value="USD">USD</option>
    <option value="EUR">EUR</option>
  </select>
</div>

<button type="submit" class="btn btn-success">
  Save
</button>

{% if payout %}
<a href="/payout/settings" class="btn btn-link ms-2">
  Cancel
</a>
{% endif %}

</form>

{% endif %}

</div>
{% endblock %}
