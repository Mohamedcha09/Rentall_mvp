{% extends "base.html" %}
{% block content %}

<!-- ===== Hide navbars & FAB ONLY on thread page ===== -->
<style>
  header.topbar,
  .m-top-tabs,
  .mobile-tabbar,
  #fabAdd {
      display: none !important;
  }
  body.has-tabbar {
      padding-bottom: 0 !important;
  }
</style>

<style>
  .msg{
    border:1px solid rgba(0,0,0,.06);
    border-radius:.75rem;
    padding:.65rem .8rem;
    margin-bottom:.5rem
  }
</style>

<div class="d-flex align-items-center gap-2 mb-3">
  <div class="avatar" style="width:40px;height:40px;border-radius:50%;overflow:hidden;background:#f2f3f5;">
    <img src="{{ other_avatar }}"
         referrerpolicy="no-referrer"
         onerror="this.onerror=null;this.src='/static/placeholder.svg'"
         style="width:100%;height:100%;object-fit:cover;">
  </div>
  <div>
    <div class="fw-semibold">
      {{ (other.first_name or '') ~ ' ' ~ (other.last_name or '') }}
      {% if other and other.is_verified %}
        <img src="/static/verified.png" alt="verified" style="height:16px">
      {% endif %}
    </div>
    {% if item_title %}
      <div class="text-muted small">{{ item_title }}</div>
    {% endif %}
  </div>
</div>

{% if messages and messages|length %}
  <div class="list-group mb-3">
    {% for m in messages %}
      <div class="msg">
        <div class="small text-muted">
          {{ m.sender.first_name }} Â· {{ m.created_at.strftime("%Y-%m-%d %H:%M") }}
        </div>
        <div>{{ m.body }}</div>
      </div>
    {% endfor %}
  </div>
{% else %}
  <div class="text-muted mb-3">No messages yet.</div>
{% endif %}

<form class="mt-2" method="post" action="/messages/{{ thread.id }}">
  <div class="input-group">
    <input type="text" name="body" class="form-control" placeholder="Write a message..." required>
    <button class="btn btn-primary">Send</button>
  </div>
</form>

{% endblock %}
