{% extends "base.html" %}

{% block head %}
<style>
  /* اخفاء كل شيء يخص التخطيط العام في هذه الصفحة */
  .topbar, .sidebar, .mobile-tabbar, .fab { display:none !important; }
  .page{ margin:0 !important; padding:0 !important; min-height:100vh; }

  /* خلفية ناعمة */
  .login-bg{
    min-height:100vh;
    background:
      radial-gradient(1100px 800px at 80% -10%, rgba(124,92,255,.12), transparent 45%),
      radial-gradient(900px 600px at -10% 110%, rgba(0,229,168,.06), transparent 40%),
      var(--bg,#0b0f15);
    display:flex; align-items:center; justify-content:center;
  }

  .login-wrap{
    width:100%; max-width:1200px; padding:28px 16px; margin:auto;
    display:grid; grid-template-columns: 1fr 420px; gap:28px;
  }
  @media (max-width: 992px){
    .login-wrap{ grid-template-columns: 1fr; gap:18px; padding:18px 12px; }
  }

  /* العمود الأيسر (النص والبراند) */
  .brand-side{ color:var(--text); padding: 24px 6px; }
  .brand-row{ display:flex; align-items:center; gap:14px; margin-bottom:10px }
  .brand-logo{ width:54px; height:54px; border-radius:14px; object-fit:cover;
               box-shadow:0 10px 26px rgba(0,0,0,.28) }
  .brand-name{
    font-weight:900; letter-spacing:.2px;
    font-size:36px; line-height:1; background: linear-gradient(90deg,#5a3eff,#2ec7a6);
    -webkit-background-clip:text; background-clip:text; color:transparent;
  }
  .pill{
    display:inline-flex; align-items:center; gap:8px;
    padding:.35rem .65rem; border-radius:999px;
    background:rgba(124,92,255,.18); color:#cfe2ff;
    border:1px solid rgba(124,92,255,.35); font-weight:700; font-size:.9rem;
  }
  .headline{
    font-weight:800; font-size: clamp(24px, 3.8vw, 40px);
    line-height:1.25; margin:14px 0 10px;
  }
  .subline{
    color:var(--muted); font-size:clamp(14px,1.8vw,16px);
  }

  /* العمود الأيمن (الكارد) */
  .login-card{
    background:linear-gradient(180deg, color-mix(in oklab, var(--panel,#0f172a) 96%, transparent),
                                      color-mix(in oklab, var(--surface,#111827) 92%, transparent));
    border:1px solid var(--border); border-radius:14px;
    padding:18px; box-shadow:0 18px 44px rgba(0,0,0,.35);
  }
  .login-card .head{
    display:flex; align-items:center; justify-content:space-between; margin-bottom:6px;
  }
  .secure-pill{
    display:inline-flex; align-items:center; gap:6px;
    padding:.25rem .5rem; border-radius:999px; font-size:.78rem;
    color:#b7f3e7; background:rgba(46,199,166,.15);
    border:1px solid rgba(46,199,166,.4);
  }
  .form-control{
    background:rgba(255,255,255,.06); border:1px solid var(--border);
    color:var(--text); border-radius:10px; height:46px;
  }
  .form-control::placeholder{ color:color-mix(in oklab, var(--text) 55%, transparent) }
  .row-note{ color:var(--muted); font-size:.86rem; margin:.25rem 2px 10px }
  .btn-primary{
    background:linear-gradient(135deg,var(--primary,#7c5cff),var(--primary-2,#5a3eff));
    border:0; height:46px; font-weight:800; letter-spacing:.3px;
  }
  .btn-success{ height:44px; font-weight:800 }
  .footer-note{ color:var(--muted); font-size:.85rem; text-align:center; margin-top:10px }

  /* زر اظهار/اخفاء كلمة المرور */
  .pw-toggle{
    position:absolute; inset-inline-start:10px; top:50%; transform:translateY(-50%);
    cursor:pointer; opacity:.75;
  }

  /* تصغير الحاوية على الموبايل */
  @media (max-width:480px){
    .login-card{ padding:14px }
  }
</style>
{% endblock %}

{% block content %}
<div class="login-bg">
  <div class="login-wrap" role="main">

    <!-- يسار: علامة تجارية + نص تعريفي -->
    <section class="brand-side">
      <div class="brand-row">
        <img class="brand-logo" src="{{ url_for('static', path='images/base.png') }}" alt="SEVOR">
        <div class="brand-name">SEVOR</div>
      </div>

      <div class="pill">
        <span class="bi bi-stars"></span>
        <span>منصّة الحجز الذكية</span>
      </div>

      <h1 class="headline mt-3">
        ابقَ على تواصل مع الأشياء التي تحتاجها في حياتك اليومية.
      </h1>
      <p class="subline">
        استأجر ما تريد بسهولة وأمان: إدارة محادثاتك، مدفوعاتك، وإشعاراتك — كلها في مكانٍ واحد.
      </p>
    </section>

    <!-- يمين: كارد تسجيل الدخول -->
    <aside class="login-card">
      <div class="head">
        <div class="fw-bold">تسجيل الدخول</div>
        <div class="secure-pill">
          <i class="bi bi-shield-lock"></i> آمن ومشفّر
        </div>
      </div>

      {% if request.query_params.get('err') %}
        <div class="alert alert-danger py-2">البريد أو كلمة المرور غير صحيحة.</div>
      {% endif %}

      <form method="post" action="/login" novalidate>
        <div class="mb-3">
          <label class="form-label">البريد الإلكتروني</label>
          <input type="email" class="form-control" name="email" placeholder="name@example.com" required>
        </div>

        <div class="mb-1 position-relative">
          <label class="form-label">كلمة المرور</label>
          <input id="pw" type="password" class="form-control" name="password" placeholder="••••••••" required>
          <button class="btn btn-sm btn-ghost pw-toggle" type="button" aria-label="إظهار/إخفاء">
            <i class="bi bi-eye"></i>
          </button>
        </div>

        <div class="row-note">يتم تشفير كلمات المرور، ونستعمل التحقق بخطوتين لحماية حسابك.</div>

        <button type="submit" class="btn btn-primary w-100">دخول</button>

        <div class="d-grid mt-2">
          <a class="btn btn-success w-100" href="/register">إنشاء حساب جديد</a>
        </div>
      </form>

      <div class="footer-note">
        © SEVOR — كل الحقوق محفوظة
      </div>
    </aside>

  </div>
</div>

<script>
  // إظهار/إخفاء كلمة المرور
  (function(){
    const btn = document.querySelector('.pw-toggle');
    const pw  = document.getElementById('pw');
    if (!btn || !pw) return;
    btn.addEventListener('click', function(){
      const t = pw.getAttribute('type') === 'password' ? 'text' : 'password';
      pw.setAttribute('type', t);
      const i = btn.querySelector('i');
      if (i){ i.className = 'bi ' + (t === 'password' ? 'bi-eye' : 'bi-eye-slash'); }
      pw.focus();
    });
  })();
</script>
{% endblock %}