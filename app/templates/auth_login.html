{% extends "base.html" %}

{% block head %}
<style>
  /* ===== إخفاء عناصر التصفّح لهذه الصفحة فقط ===== */
  .topbar, .sidebar, .mobile-tabbar, .fab { display:none !important; }

  /* ===== الصفحة: ملء الشاشة، عمودان ===== */
  .page{
    margin:0!important; padding:0!important; max-width:none!important;
    min-height:100dvh; min-height:100svh;
    display:grid; grid-template-columns: min(440px, 96vw) 1fr;
  }

  /* ===== عمود النموذج (زجاجي) ===== */
  .auth-side{
    position:relative;
    display:flex; align-items:center; justify-content:center;
    background: linear-gradient(180deg,
      color-mix(in oklab, var(--panel) 96%, transparent),
      color-mix(in oklab, var(--surface) 92%, transparent)
    );
    border-inline-end:1px solid var(--border);
    padding: clamp(16px, 3vw, 28px);
  }
  .auth-card{
    width:100%; max-width:380px;
    background: linear-gradient(180deg,
      color-mix(in oklab, var(--card) 92%, transparent),
      color-mix(in oklab, var(--card) 86%, transparent)
    );
    border:1px solid var(--border); border-radius:18px;
    box-shadow: var(--shadow);
    padding:20px 18px;
  }

  /* لوجو صغير واسم */
  .brand-mini{display:flex; align-items:center; justify-content:space-between; margin-bottom:6px}
  .brand-left{display:flex; align-items:center; gap:10px}
  .brand-left img{ height:28px }
  .muted{ color:var(--muted) }

  /* حقول */
  .form-label{ font-weight:700 }
  .input-group .btn{ border-radius:12px }
  .input-help{ font-size:.85rem; color:var(--muted) }

  .btn-primary{
    background: linear-gradient(135deg, var(--primary), var(--primary-2));
    border:0; box-shadow:0 12px 28px rgba(124,92,255,.28);
  }
  .btn-success{ box-shadow:0 10px 24px rgba(34,197,94,.18) }

  /* شارة صغيرة أعلى النموذج */
  .mini-badge{
    display:inline-flex; align-items:center; gap:6px;
    padding:.25rem .55rem; border-radius:999px; font-size:.82rem; font-weight:700;
    background: rgba(124,92,255,.14); border:1px solid rgba(124,92,255,.35);
    margin: 2px 0 10px;
  }

  /* ===== عمود العرض (بصري) ===== */
  .hero{
    position:relative; overflow:hidden;
    display:flex; align-items:center; justify-content:center;
  }
  .hero-inner{ max-width:880px; padding: clamp(22px, 6vw, 110px); text-align:center }
  .badge-xl{
    display:inline-flex; gap:8px; align-items:center;
    padding:.45rem .85rem; border-radius:999px; font-weight:800;
    background: rgba(124,92,255,.16); border:1px solid rgba(124,92,255,.38);
  }
  .hero h1{ font-weight:900; letter-spacing:.2px; margin:14px 0 10px; font-size: clamp(1.3rem, 3.4vw, 2.2rem) }
  .hero p{ color:var(--muted); font-size: clamp(.95rem, 1.6vw, 1.1rem); margin:0 auto; max-width: 68ch }

  /* خلفية متحركة خفيفة */
  .bg-anim{
    position:absolute; inset:-20% -30% -20% -30%; z-index:-1;
    background:
      radial-gradient(1200px 700px at 85% 10%, rgba(124,92,255,.22), transparent 60%),
      radial-gradient(900px 600px at 10% 90%, rgba(0,229,168,.12), transparent 50%);
    filter: blur(8px) saturate(120%);
    animation: floaty 14s ease-in-out infinite alternate;
  }
  @keyframes floaty{
    0%{ transform: translate3d(0,0,0) scale(1) }
    100%{ transform: translate3d(-2%, -1%, 0) scale(1.04) }
  }

  /* رسائل */
  .alert-error{
    border:1px solid color-mix(in oklab, var(--danger) 55%, var(--border));
    background: color-mix(in oklab, var(--danger) 10%, transparent);
    color:inherit; border-radius:12px; padding:.6rem .75rem; font-size:.95rem;
  }

  /* استجابة */
  @media (max-width: 992px){
    .page{ grid-template-columns: 1fr; }
    .auth-side{ order:2; border-inline-end:0; border-top:1px solid var(--border) }
    .hero{ order:1; min-height:42vh }
  }
</style>
{% endblock %}

{% block content %}
<div class="auth-side">
  <div class="auth-card">
    <div class="brand-mini">
      <div class="brand-left">
        <img src="{{ url_for('static', path='images/base.png') }}" alt="SEVOR">
        <strong>SEVOR</strong>
      </div>
      <span class="muted small">تسجيل الدخول</span>
    </div>

    <div class="mini-badge">
      <i class="bi bi-shield-lock"></i> آمن ومشفّر
    </div>

    {# رسالة خطأ اختيارية عبر ?err=1 #}
    {% if request and request.query_params.get('err') %}
      <div class="alert-error mb-2">
        البريد أو كلمة المرور غير صحيحة. حاول مجددًا.
      </div>
    {% endif %}

    <form method="post" action="/login" novalidate>
      <div class="mb-3">
        <label class="form-label">البريد الإلكتروني</label>
        <input type="email" class="form-control" name="email" required placeholder="name@email.com" autofocus>
      </div>

      <div class="mb-2">
        <label class="form-label d-flex justify-content-between align-items-center">
          <span>كلمة المرور</span>
          <a href="/reset" class="small muted">هل نسيت؟</a>
        </label>
        <div class="input-group">
          <input id="pw" type="password" class="form-control" name="password" required placeholder="••••••••">
          <button class="btn btn-ghost" type="button" onclick="togglePw()" aria-label="إظهار/إخفاء">
            <i class="bi bi-eye"></i>
          </button>
        </div>
        <div class="input-help mt-1">
          يتم تشفير كلمات المرور ونستعمل التحقق بخطوتين لحماية حسابك.
        </div>
      </div>

      <button type="submit" class="btn btn-primary w-100 mt-3">دخول</button>
      <a href="/register" class="btn btn-success w-100 mt-2">إنشاء حساب جديد</a>

      <div class="small text-center mt-3 muted">© SEVOR — كل الحقوق محفوظة</div>
    </form>
  </div>
</div>

<div class="hero">
  <div class="bg-anim"></div>
  <div class="hero-inner">
    <div class="badge-xl">
      <i class="bi bi-stars"></i> منصة الحجز الذكية • <b>SEVOR</b>
    </div>
    <h1>ابقَ على تواصل مع الأشياء التي تحتاجها في حياتك اليومية.</h1>
    <p>
      استأجر ما تريد بسهولة وأمان؛ إدارة محادثات، مدفوعات، وإشعارات — كلها في مكان واحد.
    </p>
  </div>
</div>

<script>
  function togglePw(){
    const pw = document.getElementById('pw');
    pw.type = (pw.type === 'password') ? 'text' : 'password';
  }
</script>
{% endblock %}