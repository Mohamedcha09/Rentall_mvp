{% extends "base.html" %}

{% block content %}
<div class="container" style="max-width:1100px">

<h3 class="mb-4">üí∏ Owner Payouts (Admin)</h3>

{% if not rows %}
  <div class="alert alert-success">
    ‚úÖ No pending payouts.
  </div>
{% endif %}

{% for row in rows %}
<div class="card mb-3">
  <div class="card-body">

    <div class="d-flex justify-content-between align-items-start">
      <div>
        <h5 class="mb-1">
          Booking #{{ row.booking.id }}
        </h5>
        <div class="text-muted">
          Owner: <strong>{{ row.owner.full_name }}</strong><br>
          Item ID: {{ row.booking.item_id }}
        </div>
      </div>

      <form method="post" action="/admin/payouts/{{ row.booking.id }}/mark-sent">
        <button class="btn btn-success">
          ‚úî Mark as paid
        </button>
      </form>
    </div>

    <hr>

    <p class="mb-1">
      <strong>Amount to send:</strong>
      {{ row.booking.owner_amount }} {{ row.booking.currency_display or row.booking.currency }}
    </p>

    {% if row.payout %}
      <p class="mb-0">
        <strong>Method:</strong> {{ row.payout.method|upper }} <br>
        <strong>Destination:</strong> {{ row.payout.destination }}
      </p>
    {% else %}
      <p class="text-danger mb-0">
        ‚ö†Ô∏è Owner has no payout method configured
      </p>
    {% endif %}

  </div>
</div>
{% endfor %}

</div>
{% endblock %}
