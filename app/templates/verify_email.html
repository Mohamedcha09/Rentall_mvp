{% extends "base.html" %}
{% block content %}
<style>
  /* ===== Modern Email Verify Page ===== */
  :root{
    --card-bg: rgba(255,255,255,.04);
    --card-bd: rgba(255,255,255,.12);
    --accent: #2563eb;
    --success: #16a34a;
    --warning: #f59e0b;
    --muted: rgba(255,255,255,.7);
  }
  .ve-container{
    max-width: 860px; margin: 0 auto; padding: 32px 16px;
  }
  .ve-card{
    background: var(--card-bg);
    border: 1px solid var(--card-bd);
    border-radius: 16px;
    overflow: hidden;
    position: relative;
  }
  .ve-hero{
    padding: 28px 24px 14px;
    background:
      radial-gradient(1200px 180px at 100% -30%, rgba(37,99,235,.15), transparent 60%),
      radial-gradient(1000px 180px at 0% -40%, rgba(22,163,74,.12), transparent 60%);
  }
  .ve-title{
    display: flex; align-items: center; gap: 10px; margin: 0 0 8px 0;
    font-size: 26px; font-weight: 800;
  }
  .ve-badge{
    display:inline-flex; align-items:center; gap:8px;
    background: rgba(37,99,235,.15); border:1px solid rgba(37,99,235,.35);
    color: #cfe0ff; padding: 6px 10px; border-radius: 999px; font-size: 13px;
  }
  .ve-body{ padding: 16px 24px 24px; }
  .ve-steps{ display:grid; grid-template-columns: 1fr; gap: 10px; margin: 12px 0 18px; }
  .ve-step{
    display:flex; align-items:flex-start; gap:12px;
    background: rgba(255,255,255,.03); border:1px dashed var(--card-bd);
    padding:12px 14px; border-radius:12px;
  }
  .ve-step i{
    flex:0 0 auto; width:28px; height:28px; border-radius:50%;
    display:grid; place-items:center; font-style:normal; font-weight:900;
    background: rgba(37,99,235,.15); border:1px solid rgba(37,99,235,.3);
  }
  .ve-actions{ display:flex; flex-wrap:wrap; gap:10px; margin-top: 6px; }
  .btn-ve{
    border-radius:10px; padding:10px 14px; border:1px solid transparent;
    font-weight:700; text-decoration:none; display:inline-flex; align-items:center; gap:8px;
  }
  .btn-primary-ve{ background: var(--accent); color:#fff; }
  .btn-outline-ve{ background: transparent; color:#fff; border-color: var(--card-bd); }
  .btn-success-ve{ background: var(--success); color:#fff; }
  .btn-ghost-ve{ background: rgba(255,255,255,.06); color:#fff; }
  .ve-email{
    display:flex; align-items:center; gap:8px; padding:10px 12px;
    background: rgba(255,255,255,.06); border:1px solid var(--card-bd); border-radius:10px;
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    direction:ltr; unicode-bidi: plaintext;
  }
  .ve-hint{ color: var(--muted); font-size: 14px; }
  .ve-divider{ height:1px; background: var(--card-bd); margin: 16px 0; }
  .ve-faq details{
    background: rgba(255,255,255,.03); border:1px solid var(--card-bd); border-radius:12px; padding: 10px 12px;
  }
  .ve-faq summary{ cursor:pointer; font-weight:700; }
  .ve-pulse{
    position:absolute; inset:auto 16px 16px auto; width:10px; height:10px; border-radius:999px;
    background: var(--warning); box-shadow: 0 0 0 0 rgba(245,158,11,.7); animation: pulse 1.6s infinite;
  }
  @keyframes pulse{
    0%{ box-shadow:0 0 0 0 rgba(245,158,11,.6) }
    70%{ box-shadow:0 0 0 10px rgba(245,158,11,0) }
    100%{ box-shadow:0 0 0 0 rgba(245,158,11,0) }
  }
  @media (min-width: 720px){
    .ve-steps{ grid-template-columns: 1fr 1fr; }
  }
</style>

<div class="ve-container" dir="rtl">
  <div class="ve-card">
    <span class="ve-pulse" title="Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„ØªÙØ¹ÙŠÙ„"></span>

    <div class="ve-hero">
      <h3 class="ve-title">
        âœ‰ï¸ ØªØ­Ù‚Ù‘Ù‚ Ù…Ù† Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ
        <span class="ve-badge">Ø§Ù„Ø®Ø·ÙˆØ© 1/2 â€” ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¨Ø±ÙŠØ¯</span>
      </h3>
      <p class="ve-hint">
        Ù„Ù‚Ø¯ Ø£Ø±Ø³Ù„Ù†Ø§ Ø±Ø§Ø¨Ø· ØªÙØ¹ÙŠÙ„ Ø¥Ù„Ù‰ Ø¨Ø±ÙŠØ¯Ùƒ
        {% if email %}<b>{{ email }}</b>{% else %}<b>â€”</b>{% endif %}.
        Ø§ÙØªØ­ Ø§Ù„Ø±Ø³Ø§Ù„Ø© ÙˆØ§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± <b>ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨</b>.
      </p>
    </div>

    <div class="ve-body">
      {% if email %}
      <div class="ve-email" id="emailBox" data-email="{{ email|e }}">
        {{ email }}
        <button class="btn-ve btn-ghost-ve" id="copyBtn" type="button" style="margin-right:auto">Ù†Ø³Ø® Ø§Ù„Ø¨Ø±ÙŠØ¯</button>
      </div>
      {% endif %}

      <div class="ve-steps">
        <div class="ve-step">
          <i>1</i>
          <div>
            <b>Ø§ÙØªØ­ ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„ÙˆØ§Ø±Ø¯</b>
            <div class="ve-hint">Ø§Ø¨Ø­Ø« Ø¹Ù† Ø±Ø³Ø§Ù„Ø© Ø¨Ø¹Ù†ÙˆØ§Ù† â€œActivate your account â€” RentAllâ€.</div>
          </div>
        </div>
        <div class="ve-step">
          <i>2</i>
          <div>
            <b>Ø§Ø¶ØºØ· Ø²Ø± â€œØªÙØ¹ÙŠÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨â€</b>
            <div class="ve-hint">Ø³ÙŠÙØªØ­ Ø§Ù„Ù…ÙˆÙ‚Ø¹ ÙˆÙŠØ¤ÙƒØ¯ ØªÙØ¹ÙŠÙ„ Ø¨Ø±ÙŠØ¯Ùƒ Ù…Ø¨Ø§Ø´Ø±Ø©.</div>
          </div>
        </div>
        <div class="ve-step">
          <i>3</i>
          <div>
            <b>Ø³Ø¬Ù‘Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„</b>
            <div class="ve-hint">Ø¨Ø¹Ø¯ ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¨Ø±ÙŠØ¯ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆØ§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…ÙˆÙ‚Ø¹ (Ø²Ø± Ø§Ù„Ø­Ø¬Ø² ÙŠØ¨Ù‚Ù‰ Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ù…ÙˆØ§ÙÙ‚Ø© Ø§Ù„Ø£Ø¯Ù…ÙŠÙ†).</div>
          </div>
        </div>
        <div class="ve-step">
          <i>ğŸ’¡</i>
          <div>
            <b>Ù„Ù… ØªØ¬Ø¯ Ø§Ù„Ø±Ø³Ø§Ù„Ø©ØŸ</b>
            <div class="ve-hint">ØªØ­Ù‚Ù‚ Ù…Ù† Ù…Ø¬Ù„Ø¯ <b>Spam</b> Ø£Ùˆ Ø§Ø¨Ø­Ø« Ø¨Ø§Ø³Ù… Ø§Ù„Ù…ÙˆÙ‚Ø¹ â€œRentAllâ€.</div>
          </div>
        </div>
      </div>

      <div class="ve-actions">
        {% if email %}
        <a class="btn-ve btn-primary-ve" id="openInboxBtn">ÙØªØ­ Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¢Ù†</a>
        {% endif %}
        <a href="/login" class="btn-ve btn-outline-ve">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</a>
        <a href="/" class="btn-ve btn-outline-ve">Ø§Ù„Ø±Ø¬ÙˆØ¹ Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
      </div>

      <div class="ve-divider"></div>

      <div class="ve-faq">
        <details>
          <summary>Ù„Ù… ØªØµÙ„Ù†ÙŠ Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªÙØ¹ÙŠÙ„ØŒ Ù…Ø§Ø°Ø§ Ø£ÙØ¹Ù„ØŸ</summary>
          <div class="ve-hint" style="margin-top:8px">
            1) ØªØ£ÙƒØ¯ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø£Ø¹Ù„Ø§Ù‡ â€” Ø¥Ù† ÙƒØ§Ù† Ø®Ø·Ø£Ù‹ØŒ Ø³Ø¬Ù‘Ù„ Ù…Ù† Ø¬Ø¯ÙŠØ¯ Ø¨Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„ØµØ­ÙŠØ­.<br>
            2) Ø§ÙØ­Øµ Ù…Ø¬Ù„Ø¯ <b>Spam</b> Ø£Ùˆ <b>Junk</b>.<br>
            3) Ø§Ù†ØªØ¸Ø± Ø¯Ù‚ÙŠÙ‚Ø© Ø£Ùˆ Ø¯Ù‚ÙŠÙ‚ØªÙŠÙ† Ø«Ù… Ø­Ø¯Ù‘Ø« Ø§Ù„ØµÙØ­Ø©.<br>
            4) Ø¥Ø°Ø§ Ø§Ø³ØªÙ…Ø±Øª Ø§Ù„Ù…Ø´ÙƒÙ„Ø©ØŒ ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ Ù…Ù† ØµÙØ­Ø© â€œØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§â€.
          </div>
        </details>
      </div>

      <p class="ve-hint" style="margin-top:14px">
        Ù…Ù„Ø§Ø­Ø¸Ø©: ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¨Ø±ÙŠØ¯ ÙŠÙØªØ­ Ø­Ø³Ø§Ø¨Ùƒ. Ù„ÙƒÙ† Ø²Ø± <b>Ø§Ø­Ø¬Ø² Ø§Ù„Ø¢Ù†</b> ÙŠÙÙØ¹Ù‘ÙÙ„ ÙÙ‚Ø· Ø¨Ø¹Ø¯ Ù…ÙˆØ§ÙÙ‚Ø© Ø§Ù„Ø£Ø¯Ù…ÙŠÙ† Ø¹Ù„Ù‰ ØµÙˆØ±Ùƒ ÙˆÙˆØ«Ø§Ø¦Ù‚Ùƒ.
      </p>
    </div>
  </div>
</div>

<script>
  (function(){
    const email = document.getElementById('emailBox')?.dataset?.email || '';
    // Ø®Ø±ÙŠØ·Ø©ãƒ‰ÙˆÙ…ÙŠÙ†Ø§Øª Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø¥Ù„Ù‰ ØµÙØ­Ø© Ø§Ù„Ø¨Ø±ÙŠØ¯
    const providers = [
      {m:/gmail\.com$/i, url:'https://mail.google.com/'},
      {m:/(outlook|hotmail|live)\.com$/i, url:'https://outlook.live.com/mail/'},
      {m:/yahoo\.com$/i, url:'https://mail.yahoo.com/'},
      {m:/icloud\.com$/i, url:'https://www.icloud.com/mail'},
      {m:/mail\.ru$/i, url:'https://e.mail.ru/'},
      {m:/proton\.me$|protonmail\.com$/i, url:'https://mail.proton.me/u/0/inbox'},
    ];
    const domain = (email.split('@')[1] || '').toLowerCase();
    const match = providers.find(p => p.m.test(domain));
    const openBtn = document.getElementById('openInboxBtn');
    if(openBtn){
      if(match){ openBtn.href = match.url; openBtn.target='_blank'; }
      else { openBtn.href = '/'; openBtn.onclick = function(e){ e.preventDefault(); alert('Ø§ÙØªØ­ Ø¨Ø±ÙŠØ¯Ùƒ ÙŠØ¯ÙˆÙŠÙ‹Ø§: ' + (domain || 'â€”')); }; }
    }
    const cp = document.getElementById('copyBtn');
    if(cp){
      cp.addEventListener('click', async ()=>{
        try{
          await navigator.clipboard.writeText(email);
          cp.textContent = 'ØªÙ… Ø§Ù„Ù†Ø³Ø® âœ“';
          setTimeout(()=> cp.textContent = 'Ù†Ø³Ø® Ø§Ù„Ø¨Ø±ÙŠØ¯', 1600);
        }catch(e){ alert('Ø§Ù†Ø³Ø® Ø§Ù„Ø¨Ø±ÙŠØ¯ ÙŠØ¯ÙˆÙŠÙ‹Ø§: ' + email); }
      });
    }
  })();
</script>
{% endblock %}