{% extends "base.html" %}

{% block head %}
<style>
.card{
  border:1px solid var(--border);
  border-radius:18px;
  padding:20px;
  background:var(--surface);
  margin-bottom:18px;
}

.method{
  border:1px solid var(--border);
  border-radius:16px;
  padding:16px;
  margin-bottom:14px;
  cursor:pointer;
  transition:.2s ease;
}

.method.active{
  border-color:#6d5dfc;
  background:rgba(109,93,252,.06);
}

.method-title{
  display:flex;
  align-items:center;
  gap:10px;
  font-weight:600;
}

.field{
  margin-top:14px;
}

.field input, .field select{
  width:100%;
  padding:12px 14px;
  border-radius:12px;
  border:1px solid var(--border);
}

.hint{
  font-size:.85rem;
  opacity:.7;
  margin-top:4px;
}
</style>
{% endblock %}

{% block content %}
<div class="container" style="max-width:820px">

<h3 class="mb-3">Connect payout method</h3>

<form method="post" action="/payout/settings">

  <div class="card">
    <p>
      Choose how you want to receive your <strong>earnings</strong>.
    </p>
    <p class="hint">
      Sevor sends payouts manually.
    </p>
  </div>

  <div class="card">

    <!-- =========================
         INTERAC (DEFAULT)
         ========================= -->
    <div class="method active" data-method="interac">
      <div class="method-title">
        <input type="radio" name="method" value="interac" checked>
        Interac e-Transfer (Canada)
      </div>

      <div class="field">
        <input
          type="text"
          name="interac_destination"
          placeholder="Email or phone number"
        >
      </div>

      <label class="mt-2">
        <input type="checkbox" name="auto_deposit">
        Enable auto-deposit
      </label>
    </div>

    <!-- =========================
         PAYPAL
         ========================= -->
    <div class="method" data-method="paypal">
      <div class="method-title">
        <input type="radio" name="method" value="paypal">
        PayPal
      </div>

      <div class="field d-none">
        <input
          type="email"
          name="paypal_email"
          placeholder="PayPal email"
        >
      </div>
    </div>

    <!-- =========================
         WISE
         ========================= -->
    <div class="method" data-method="wise">
      <div class="method-title">
        <input type="radio" name="method" value="wise">
        Wise
      </div>

      <div class="field d-none">
        <input
          type="text"
          name="wise_iban"
          placeholder="IBAN"
        >
      </div>
    </div>

  </div>

  <div class="card">
    <label class="mb-2">Payout currency</label>
    <select name="currency" required>
      <option value="CAD">CAD</option>
      <option value="USD">USD</option>
      <option value="EUR">EUR</option>
    </select>
  </div>

  <div class="d-flex gap-2">
    <button type="submit" class="btn btn-primary">
      Save payout method
    </button>

    <a href="/payout/settings" class="btn btn-outline-secondary">
      Cancel
    </a>
  </div>

</form>

</div>
{% endblock %}

{% block scripts %}
<script>
(function(){
  const methods = document.querySelectorAll(".method");
  const radios = document.querySelectorAll("input[name=method]");

  radios.forEach(radio => {
    radio.addEventListener("change", () => {
      methods.forEach(m => {
        const active = m.dataset.method === radio.value;
        m.classList.toggle("active", active);

        m.querySelectorAll(".field").forEach(f => {
          f.classList.toggle("d-none", !active);
        });
      });
    });
  });
})();
</script>
{% endblock %}
